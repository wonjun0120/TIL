# 도메인 주도 설계로 시작하는 마이크로서비스 개발

## 03. 마이크로서비스 애플리케이션 아키텍처

- 데이터베이스 중심 아키텍처 문제점
    - 데이터베이스 중심 아키텍처 -> 특정 관계형 데이터베이스에 의존한 데이터 모델링을 수행한 다음 물리 테블 모델을 중심에 두고 애플리케이션 구현하기 위한 사고를 하는 방식
    - Spring -> Service, DB IO, DTO로 구성, MyBatis
    - 문제점
        - 간단한 처리 로직의 경우는 편하지만 업무가 복잡해지면 복잡성 제어 불가
        - 데이터 증가에 따른 DB 성능저하, DB서버의 사양과 용량 증가를 하지만 이는 자동 스케일 아웃의 의미 없어짐
- 헥사고날 아키텍처와 클린 아키텍처
    - 레이어드 아키텍처
        - 티어 : 물리적인 장비, 레이어 : 내부의 논리적인 분할
        - 상위 계층은 하위 계층 호출, 단방향성 유지, 상위 계층은 하위 계층을 직접 호출하는 대신 추상적인 인터페이스에 의존
        - 그러나, 모든 계층이 자신이 제공하는 기능에 대한 추상적인 인터페이스를 직접 정의, 소유하고 있는 구조 -> OCP 위배
        - 데이터 액세스 인터페이스의 위치가 문제 -> 데이터 액세스 계층에 존재하기에 상위 계층이 하위 계층에 의존함
        - 해결책 -> 데이터 액세스 계층이 아닌 비즈니스 로직 계층에서 이를 정의, 의존관계 역전
    - 헥사고날 아키텍처
        - 포트 앤드 어댑터 아키텍처
        - 고수준, 비즈니스 로직 처리, 내부 영역 / 저수준, 인터페이스 처리, 외부영역
        - 고수준의 내부 영역이 외부의 구체 어댑터에 전혀 의존하지 않게 함
    - 클린 아키텍처
        - 중앙 < 엔티티 < 유스케이스 < 그 외 세부사항 (컨트롤러, 게이트웨이, 프레젠터) < 디바이스, 웹, 외부 인터페이스
        - 엔티티 : 정중앙 위치, 비즈니스 업무 규칙
        - 유스케이스 : 자동화 시스템(엔티티)을 사용하는 처리 절차
        - 세부사항 : 유스케이스를 감싸고 있는 나머지 영역
- 바람직한 마이크로서비스 내부 아키텍처 : 클린 마이크로 서비스
    - https://learn.microsoft.com/ko-kr/dotnet/architecture/microservices/multi-container-microservice-net-applications/microservice-application-design
    - p.96 아키텍처 지향 원칙
- 메모)
    - 책 후반부의 예시 사례를 통해 마이크로서비스 애플리케이션을 조금 더 공부하고, 관련 아키텍처를 다시 공부
    - 헥사고날, 클린 아키텍처를 키워드로 이후 추가 정리 예정
